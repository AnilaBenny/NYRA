<%-include('adminheader')%>

<body>
   
    <main class="main-wrap">
        <header class="main-header navbar">
           
            <div class="col-nav ms-auto">
                <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i
                        class="material-icons md-apps"></i> </button>
                <ul class="nav">
                   
                    <li class="nav-item">
                        <a class="nav-link btn-icon darkmode" href="#"> <i class="material-icons md-nights_stay"></i> </a>
                    </li>
                  
                    <li class="dropdown nav-item">
                        <a class="dropdown-item text-danger" href="/admin/logout"><i
                            class="material-icons md-exit_to_app"></i>Logout</a>
                    </li>
                </ul>
            </div>
        </header>
        <section class="content-main">
            <div class="card">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" data-bs-toggle="tab" href="#menu1">
                    Best selling product</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="tab" href="#menu2">
                    Best selling Category</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="tab" href="#menu3">
                    Best selling brands</a>
                </li>
              </ul>
            
             
              <div class="tab-content">
                <div id="menu1" class="container tab-pane active"><br>
                  <h3>Best Selling Products</h3>
                  <div class="row">
                    <%if(typeof product !=='undefined' && product.length > 0) {
                        for(let i=0; i<product.length; i++) { %>
                            <div class="col-xl-3 col-lg-4 col-md-6">
                    <div class="card card-product-grid">
                        <a href="#" class="img-wrap"> <img src="/uploads/productImages/<%=product[i].images[1]%>" alt="Product"> </a>
                        <div class="info-wrap">
                            <div class="dropdown float-end">
                                <a href="/admin/edit-pro?id=<%=product[i]._id %>" class="btn btn-sm btn-brand rounded">
                                    <i class="material-icons md-edit mr-5"></i>Edit
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a class="dropdown-item" href="/admin/edit-pro?id=<%=product[i]._id %>">Edit info</a>
                                </div>
                            </div>
                            <a href="#" class="title"><%=product[i].name%></a>
                            <div class="price mt-1">RS.<%=product[i].price%>.00</div> <!-- price-wrap.// -->
                        </div>
                    </div> <!-- card-product  end// -->
                </div>
                    <% }} %>
    
                </div> </div>
                <div id="menu2" class="container tab-pane fade"><br>
                  <h3>Best selling Category</h3>
                  <div class="row">
                    <%if(typeof popularityByCategory !=='undefined' && popularityByCategory.length > 0) {
                        for(let i=0; i<popularityByCategory.length; i++) { %>
                            <div class="col-xl-3 col-lg-4 col-md-6">
                   
                            <div class="table-responsive">


                                <table class="table table-hover">
                                    <tr>
                                        <th>Name</th>
                                   
                                        <th>Actions</th>
                                        
                
                                        
                                    </tr>
                                
                                            <tr>
                                                <td width="20%"><%= popularityByCategory[i].categoryName %></td>
                                                
                                            <td width="60%">
                                                <a href="/admin/edit-cate?id=<%=popularityByCategory[i]._id %>" class="btn btn-success">Edit</a>
                                                
                                                
                                             </td>
                                            </tr>
                                    <%
                                        }
                                    } else { %>
                                        <tr>
                                            <td colspan="4">Category Not Found</td>
                                        </tr>
                                    <%
                                    }
                                    %>
                                    
                                    
                                    </table>
                               
                            </div>
                     
                </div>
                    
    
                </div>
                </div>
                <div id="menu3" class="container tab-pane fade"><br>
                  <h3>Best selling Brands</h3>
                  <div class="row">
                    <%if(typeof bestSellingBrands !=='undefined' && bestSellingBrands.length > 0) {
                        %>
                            <div class="col-xl-3 col-lg-4 col-md-6">
                   
                                <div class="table-responsive">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Total Quantity Sold</th>
            </tr>
        </thead>
        <tbody>
                <% bestSellingBrands.forEach(brand => { %>
                    <tr>
    <td>
        <div class="card">
            <div class="card-body">
                <%= brand._id %>
            </div>
        </div>
    </td>
    <td>
        <div class="card">
            <div class="card-body">
                <%= brand.totalQuantitySold %> nos
            </div>
        </div>
    </td>
</tr>

                <% }); %>
            <% } else { %>
                <tr>
                    <td colspan="2">No data available</td>
                </tr>
            <% } %>
        </tbody>
    </table>
</div>

                 
    
                </div>
                </div>
              </div>
            </div>
        </div>
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                    document.write(new Date().getFullYear())
                    </script> Â© NYRA.
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                        All rights reserved
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="/public/assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/public/assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/public/assets/js/vendor/select2.min.js"></script>
    <script src="/public/assets/js/vendor/perfect-scrollbar.js"></script>
    <script src="/public/assets/js/vendor/jquery.fullscreen.min.js"></script>
  
    <script src="/public/assets/js/main.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


</body>


</html>